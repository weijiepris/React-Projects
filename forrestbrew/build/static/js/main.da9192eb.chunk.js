(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{11:function(e,t,c){e.exports={auth:"Login_auth__38SmD","login-appear":"Login_login-appear__NYJcF",control:"Login_control__QFhZl",actions:"Login_actions__3MpBg",toggle:"Login_toggle__2fD62",register:"Login_register__8CRU5"}},21:function(e,t,c){e.exports={actions:"inventory_actions__31E7N",container:"inventory_container__3D43C","login-appear":"inventory_login-appear__lqWIH",trow:"inventory_trow__1-HpK"}},23:function(e,t,c){e.exports={auth:"Profile_auth__y0QPD","login-appear":"Profile_login-appear__XmBV5",picture:"Profile_picture__1BFMY",control:"Profile_control__U6Q_F",actions:"Profile_actions__3NYne",toggle:"Profile_toggle__1szcT",register:"Profile_register__TAWvN"}},31:function(e,t,c){e.exports={header:"Header_header__mpBvs","main-image":"Header_main-image__Z7a88",actions:"Header_actions__31Nye",toggle:"Header_toggle__3C4pt",nav:"Header_nav__1Gm5A"}},32:function(e,t,c){e.exports={backdrop:"Modal_backdrop__3bweQ",container:"Modal_container__7SyDg","login-appear":"Modal_login-appear__2cxOZ",modal:"Modal_modal__1ldwc","slide-down":"Modal_slide-down__2ScKD"}},37:function(e,t,c){e.exports={auth:"Admin_auth__3zTCI","login-appear":"Admin_login-appear__3akh9",control:"Admin_control__22ZJ8",actions:"Admin_actions__3cMlC",toggle:"Admin_toggle__ax1VM",register:"Admin_register__2vdpk"}},45:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var n=c(25),a=c.n(n),o=c(13),s=(c(45),c(6)),r=c(3),i=c.n(r),l=c(7),j=c(12),d=c(11),u=c.n(d),b=c(2),O=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),c=t[0],n=t[1],a=l.a.auth().currentUser.uid,i=Object(r.useState)(!1),j=Object(s.a)(i,2),d=j[0],O=j[1];return Object(r.useEffect)((function(){return console.log(a),l.a.firestore().collection("users").doc(a).get().then((function(e){e.exists?(n(e.data()),O(!0),console.log("user data loaded: "+c)):console.log("does not exist")})),function(){console.log("cleanup")}}),[a]),d?Object(b.jsxs)("section",{className:u.a.auth,children:[Object(b.jsxs)("h1",{children:["Welcome! ",c.name]}),Object(b.jsx)("br",{}),""===c.companyID?Object(b.jsx)("div",{children:"Company details not found"}):Object(b.jsx)("div",{className:u.a.actions,children:Object(b.jsx)(o.b,{to:{pathname:"/viewInventory",state:c},children:Object(b.jsx)("button",{children:"View Inventory"})})}),"admin"===c.userRole?Object(b.jsxs)("div",{className:u.a.actions,children:[Object(b.jsx)("br",{}),Object(b.jsx)(o.b,{to:{pathname:"/admin",state:c},children:Object(b.jsx)("button",{children:"Welcome admin"})})]}):Object(b.jsx)("div",{})]}):Object(b.jsx)("section",{className:u.a.auth,children:Object(b.jsx)("h1",{children:"Loading . . . "})})},h=c(22),x=c.n(h),p=c(29),f=c(23),m=c.n(f),g=function(e){var t,c=l.a.storage(),n=Object(r.useState)([]),a=Object(s.a)(n,2),o=a[0],i=a[1],j=l.a.auth().currentUser.uid,d=Object(r.useState)(!1),u=Object(s.a)(d,2),O=u[0],h=u[1],f=Object(r.useState)(!1),g=Object(s.a)(f,2),v=g[0],_=g[1],y=Object(r.useState)(!1),N=Object(s.a)(y,2),w=N[0],C=N[1],S=Object(r.useState)([]),P=Object(s.a)(S,2),k=P[0],D=P[1];Object(r.useEffect)((function(){l.a.firestore().collection("users").doc(j).get().then((function(e){e.exists?(i(e.data()),h(!0)):console.log("does not exist")}))}),[j]);var I=function(){var e=Object(p.a)(x.a.mark((function e(){var t,n,a,o,s,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C(!0),t=k[0],console.log(t),console.log("change picture"),n="post/".concat(j,"/").concat(Math.random().toString(36)),a=c.ref().child(n).put(k[0]),o=function(e){console.log("transferred: ".concat(e.bytesTransferred))},s=function(){a.snapshot.ref.getDownloadURL().then((function(e){R(e),console.log(e)}))},r=function(e){console.log(e)},a.on("state_changed",o,r,s);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){l.a.firestore().collection("users").doc(j).set({profilePicture:e},{merge:!0}).then((function(){_(!1)}))};return O?Object(b.jsxs)("section",{className:m.a.auth,children:[Object(b.jsxs)("div",{className:m.a.picture,children:[Object(b.jsx)("img",{id:"profilePicture",alt:"",src:o.profilePicture}),Object(b.jsx)("span",{onClick:function(){var e=document.createElement("input");e.type="file",e.onchange=function(e){console.log("selected image");var c=e.target.files;D(c),console.log(c),(t=new FileReader).onload=function(){document.getElementById("profilePicture").src=t.result,console.log("image loaded"),_(!0)},t.readAsDataURL(c[0])},e.click()},children:"Edit"})]}),Object(b.jsx)("h1",{children:o.name}),Object(b.jsx)("h1",{children:o.email}),Object(b.jsx)("h1",{children:o.contact}),v&&Object(b.jsx)("div",{className:m.a.actions,children:w?Object(b.jsx)("p",{children:"Updating..."}):Object(b.jsx)("button",{onClick:I,children:"Update Profile"})})]}):Object(b.jsxs)("section",{className:m.a.auth,children:[Object(b.jsx)("div",{className:m.a.picture,children:Object(b.jsx)("img",{id:"profilePicture",alt:""})}),Object(b.jsx)("h1",{children:"Loading..."})]})},v=function(){var e=Object(r.useRef)(),t=Object(r.useRef)(),c=Object(r.useState)(""),n=Object(s.a)(c,2),a=n[0],i=n[1],j=Object(r.useState)(!1),d=Object(s.a)(j,2),O=d[0],h=d[1];return Object(b.jsxs)("section",{className:u.a.auth,children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsxs)("form",{onSubmit:function(c){c.preventDefault(),h(!0),i("");var n=e.current.value,a=t.current.value;l.a.auth().signInWithEmailAndPassword(n,a).then((function(e){h(!1),console.log(e)})).catch((function(e){switch(console.log(e),e.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-email":i("Invalid Username/Password")}})).then((function(){h(!1)}))},children:[Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"text",placeholder:"E-Mail",required:!0,ref:e})}),Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"password",placeholder:"Password",ref:t})}),Object(b.jsx)("div",{className:u.a.control,children:a}),Object(b.jsx)("div",{className:u.a.actions,children:O?Object(b.jsx)("p",{children:"Loading..."}):Object(b.jsx)("button",{children:"Login"})}),Object(b.jsxs)("div",{className:u.a.register,children:["Don't have an account?"," ",Object(b.jsx)(o.b,{to:"/register",children:"Click Here to sign up"})]})]})]})},_=c(31),y=c.n(_),N=function(e){var t=Object(r.useState)(""),c=Object(s.a)(t,2),n=c[0],a=c[1];Object(r.useEffect)((function(){l.a.auth().onAuthStateChanged((function(e){e?l.a.firestore().collection("users").doc(e.uid).get().then((function(e){e.exists&&a(e.data().companyName)})):a("")}))}));return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)("header",{className:y.a.header,children:[Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)("h1",{children:n})}),e.isLoggedIn&&Object(b.jsxs)("div",{className:y.a.nav,children:[Object(b.jsx)(o.b,{to:"/",children:Object(b.jsx)("div",{onClick:function(){l.a.auth().signOut().then((function(){a("")}))},children:"Logout"})}),Object(b.jsx)(o.b,{to:"/profile",children:Object(b.jsx)("div",{children:"Profile"})})]})]}),Object(b.jsx)("div",{className:y.a["main-image"]})]})},w=function(e){var t=Object(r.useRef)(),c=Object(r.useRef)(),n=Object(r.useRef)(),a=Object(r.useRef)(),i=Object(r.useRef)(),d=Object(r.useRef)(),O=Object(r.useState)(""),h=Object(s.a)(O,2),x=h[0],p=h[1];console.log(e.isLoggedIn);return Object(b.jsxs)("section",{className:u.a.auth,children:[e.isLoggedIn&&Object(b.jsx)(j.a,{to:"/"}),Object(b.jsx)("h1",{children:"Register"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p("");var o=t.current.value,s=c.current.value,r=n.current.value,j=a.current.value,u=i.current.value,b=d.current.value;l.a.auth().createUserWithEmailAndPassword(o,s).then((function(e){l.a.firestore().collection("users").doc(l.a.auth().currentUser.uid).set({email:o,name:r,contact:j,address1:"",address2:"",zip:"",gender:"",dateRegistered:l.a.firestore.FieldValue.serverTimestamp(),picture:"",bio:"",userRole:"default",companyName:u,companyID:b}),console.log(e)})).then((function(){l.a.firestore().collection("companies").doc(u).set({companyName:u,companyID:b,datecreated:l.a.firestore.FieldValue.serverTimestamp()})})).catch((function(e){switch(e.code){case"auth/weak-password":case"auth/email-already-in-use":p(e.message);break;default:console.log(e)}}))},children:[Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"email",placeholder:"E-Mail",required:!0,ref:t})}),Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"text",placeholder:"Name",required:!0,ref:n})}),Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"number",placeholder:"Contact Number",required:!0,ref:a})}),Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"password",placeholder:"Password",ref:c})}),Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"text",placeholder:"Company Name",ref:i})}),Object(b.jsx)("div",{className:u.a.control,children:Object(b.jsx)("input",{type:"text",placeholder:"Company ID",ref:d})}),Object(b.jsx)("div",{className:u.a.control,children:x}),Object(b.jsx)("div",{className:u.a.actions,children:Object(b.jsx)("button",{children:"Register"})}),Object(b.jsxs)("div",{className:u.a.register,children:["Have an account?"," ",Object(b.jsx)(o.b,{to:"/",exact:"true",children:"Click Here to log in"})]})]})]})},C=c(30),S=c(21),P=c.n(S),k=function(e){var t=function(){e.open(e)};return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)("td",{onClick:t,children:e.serialno}),Object(b.jsx)("td",{onClick:t,children:e.id}),Object(b.jsx)("td",{onClick:t,children:e.name}),Object(b.jsx)("td",{onClick:t,children:e.description}),Object(b.jsx)("td",{onClick:t,children:e.quantity}),Object(b.jsx)("td",{onClick:t,children:e.datecreated})]})},D=c(32),I=c.n(D),R=function(e){return Object(b.jsx)("div",{className:I.a.backdrop,onClick:e.onClose})},A=function(e){return Object(b.jsx)("div",{className:I.a.modal,children:Object(b.jsx)("div",{className:I.a.context,children:e.children})})},L=document.getElementById("overlays"),U=function(e){return Object(b.jsxs)(i.a.Fragment,{children:[a.a.createPortal(Object(b.jsx)(R,{onClose:e.onClose}),L),a.a.createPortal(Object(b.jsx)(A,{children:e.children}),L)]})},E=function(e){return console.log("in viewproduct"),Object(b.jsxs)(U,{onClose:e.onClose,children:[Object(b.jsx)("div",{children:e.data.id}),Object(b.jsx)("div",{children:e.data.name}),Object(b.jsx)("div",{children:e.data.quantity}),Object(b.jsx)("div",{children:e.data.description}),Object(b.jsx)("div",{children:e.data.datecreated})]})},M=function(e){var t=Object(r.useState)([]),c=Object(s.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)(!1),j=Object(s.a)(i,2),d=j[0],u=j[1],O=Object(r.useState)(!1),h=Object(s.a)(O,2),x=h[0],p=h[1],f=Object(r.useState)([]),m=Object(s.a)(f,2),g=m[0],v=m[1],_=l.a.auth().currentUser.uid;console.log(e);var y=function(e){console.log(e.name),v(e),console.log("showing overlay"),p(!0)};Object(r.useEffect)((function(){return l.a.firestore().collection("companies").doc(e.location.state.companyName).collection("product").orderBy("serialno","desc").get().then((function(e){e.forEach((function(e){N(e.data())})),u(!0)})),function(){console.log("cleanup")}}),[_]);var N=function(e){a((function(t){return[e].concat(Object(C.a)(t))}))};return Object(b.jsxs)("div",{className:P.a.container,children:[x&&Object(b.jsx)(E,{data:g,onClose:function(){p(!1)}}),Object(b.jsxs)("form",{children:[Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[d?Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"S/N"}),Object(b.jsx)("th",{children:"Product ID"}),Object(b.jsx)("th",{children:"Product Name"}),Object(b.jsx)("th",{children:"Product Description"}),Object(b.jsx)("th",{children:"Product Quantity"}),Object(b.jsx)("th",{children:"Date Created"})]}):Object(b.jsx)("div",{children:"Getting inventory list . . ."}),d?n.map((function(e){return Object(b.jsx)("tr",{className:P.a.trow,children:Object(b.jsx)(k,{serialno:e.serialno,id:e.id,name:e.name,description:e.description,quantity:e.quantity,datecreated:(t=e.datecreated.seconds,new Date(1e3*t).toString().substring(0,25)),open:y})},e.serialno);var t})):Object(b.jsx)("tr",{})]})}),Object(b.jsx)("br",{})]}),Object(b.jsx)("div",{className:P.a.actions,children:Object(b.jsx)(o.b,{to:{pathname:"/AddProduct",state:e.location.state},children:Object(b.jsx)("button",{children:"Add New Product"})})}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:P.a.actions,children:Object(b.jsx)("button",{children:"Remove a Product"})})]})},F=function(e){l.a.auth().currentUser.uid;var t=Object(r.useState)(!1),c=Object(s.a)(t,2),n=c[0],a=c[1],i=Object(r.useState)(!1),d=Object(s.a)(i,2),u=d[0],O=d[1],h=Object(r.useState)(""),f=Object(s.a)(h,2),m=f[0],g=(f[1],Object(r.useRef)()),v=Object(r.useRef)(),_=Object(r.useRef)(),y=function(){var t=Object(p.a)(x.a.mark((function t(c){var n,o,s,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),c.preventDefault(),n=g.current.value,o=v.current.value,s=_.current.value,r=0,console.log("company name: "+e.location.state.companyName),t.next=9,l.a.firestore().collection("companies").doc(e.location.state.companyName).collection("product").get().then((function(e){console.log("snapshot: "),r=e.size})).then((function(){console.log(r),0==r?r=1:r++,console.log("doc id:"+m),l.a.firestore().collection("companies").doc(e.location.state.companyName).collection("product").add({serialno:r,id:o,name:n,description:s,quantity:0,datecreated:l.a.firestore.FieldValue.serverTimestamp()}).then((function(){a(!0)}))}));case 9:r=t.sent;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return n?Object(b.jsx)(j.a,{push:!0,to:"/",exact:!0}):Object(b.jsx)("div",{className:P.a.container,children:Object(b.jsxs)("form",{onSubmit:y,children:[Object(b.jsx)("input",{type:"text",placeholder:"Product Name",ref:g}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"Product ID",ref:v}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"Product Description",ref:_}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{children:"Add Product"}),Object(b.jsx)(o.b,{to:"/viewInventory",exact:"true",children:Object(b.jsx)("button",{children:"Go Back"})}),u?Object(b.jsx)("div",{children:"Adding new product, Please wait . . ."}):""]})})},q=c(37),B=c.n(q),H=function(e){return Object(b.jsxs)(U,{onClose:e.onClose,children:[Object(b.jsxs)("div",{children:["Total accounts created : ",e.data.length," "]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:"Name"}),Object(b.jsx)("td",{children:"Contact"}),Object(b.jsx)("td",{children:"User Role"}),Object(b.jsx)("td",{children:"Date Registered"}),Object(b.jsx)("td",{children:"Company Name"}),Object(b.jsx)("td",{children:"Company ID"}),Object(b.jsx)("td",{children:"E-Mail"})]}),e.data.map((function(e,t){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.name}),Object(b.jsx)("td",{children:e.contact}),Object(b.jsx)("td",{children:e.userRole}),Object(b.jsx)("td",{children:(c=e.dateRegistered.seconds,new Date(1e3*c).toString().substring(0,25))}),Object(b.jsx)("td",{children:e.companyName}),Object(b.jsx)("td",{children:e.companyID}),Object(b.jsx)("td",{children:e.email})]},t);var c}))]})},V=function(e){var t=Object(r.useState)(!1),c=Object(s.a)(t,2),n=c[0],a=c[1],o=Object(r.useState)(!1),i=Object(s.a)(o,2),d=i[0],u=i[1],O=Object(r.useState)(!1),h=Object(s.a)(O,2),x=h[0],p=h[1],f=Object(r.useState)(!1),m=Object(s.a)(f,2),g=m[0],v=m[1],_=Object(r.useState)([]),y=Object(s.a)(_,2),N=y[0],w=y[1],S=Object(r.useState)(!1),P=Object(s.a)(S,2),k=P[0],D=P[1],I=Object(r.useState)(!1),R=Object(s.a)(I,2),A=R[0],L=R[1],U=Object(r.useState)([]),E=Object(s.a)(U,2),M=E[0],F=E[1],q=function(e){F(e),console.log("showing overlay"),L(!0)};Object(r.useEffect)((function(){return l.a.firestore().collection("users").get().then((function(e){e.forEach((function(e){console.log(e.data()),V(e.data())}))})).then((function(){D(!0)})),function(){console.log("cleanup")}}),[]);var V=function(e){w((function(t){return[e].concat(Object(C.a)(t))}))},W=function(){return Object(b.jsx)("div",{children:"ViewAllCompanies"})},T=function(){return Object(b.jsx)("div",{children:"UpdateUser"})},z=function(){return Object(b.jsx)("div",{children:"UpdateCompany"})};return!1===k?Object(b.jsx)("div",{children:"Loading . . . "}):void 0!==e.location.state?Object(b.jsx)("div",{className:B.a.container,children:Object(b.jsxs)("div",{className:B.a.actions,children:[Object(b.jsx)("button",{onClick:function(){a(!0),u(!1),p(!1),v(!1)},children:"View all Companies"}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:function(){q(N),a(!1),u(!0),p(!1),v(!1)},children:"View all Users"}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:function(){a(!1),u(!1),p(!0),v(!1)},children:"Update User"}),Object(b.jsx)("br",{}),Object(b.jsx)("button",{onClick:function(){a(!1),u(!1),p(!1),v(!0)},children:"Update Company"}),Object(b.jsx)("br",{}),Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[n?Object(b.jsx)(W,{}):"",d&&A?Object(b.jsx)(H,{data:M,onClose:function(){L(!1)}}):"",x?Object(b.jsx)(T,{}):"",g?Object(b.jsx)(z,{}):""]})})]})}):Object(b.jsx)(j.a,{to:"/"})};0===l.a.apps.length&&(l.a.initializeApp({apiKey:"AIzaSyDgECrWknG3jZG24XWOuDkMmXkaW7LS3as",authDomain:"forrestbrew.firebaseapp.com",projectId:"forrestbrew",storageBucket:"forrestbrew.appspot.com",messagingSenderId:"220722053401",appId:"1:220722053401:web:b445beb10d5a3b73b28588"}),l.a.analytics());var W=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),o=Object(s.a)(a,2),d=o[0],u=o[1];return Object(r.useEffect)((function(){console.log("use effect"),l.a.auth().onAuthStateChanged((function(e){e?(n(!0),u(!0),console.log("logged in")):(n(!1),u(!0),console.log("not logged in"))}))}),[]),d?Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)(N,{isLoggedIn:c}),Object(b.jsxs)(j.d,{children:[c?Object(b.jsx)(j.b,{path:"/",exact:!0,children:Object(b.jsx)(O,{})}):Object(b.jsx)(j.b,{path:"/",exact:!0,children:Object(b.jsx)(v,{})}),Object(b.jsx)(j.b,{path:"/profile",children:Object(b.jsx)(g,{})}),Object(b.jsx)(j.b,{path:"/register",children:Object(b.jsx)(w,{isLoggedIn:c})}),Object(b.jsx)(j.b,{path:"/viewInventory",component:M}),Object(b.jsx)(j.b,{path:"/AddProduct",component:F}),Object(b.jsx)(j.b,{path:"/Admin",component:V})]})]}):Object(b.jsx)("div",{children:Object(b.jsx)(N,{})})};a.a.render(Object(b.jsx)(o.a,{children:Object(b.jsx)(W,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.da9192eb.chunk.js.map